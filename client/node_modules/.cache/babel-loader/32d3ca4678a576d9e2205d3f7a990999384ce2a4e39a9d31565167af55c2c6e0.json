{"ast":null,"code":"import\"./profile.scss\";import PlaceIcon from\"@mui/icons-material/Place\";import LanguageIcon from\"@mui/icons-material/Language\";import Posts from\"../../components/posts/Posts\";import{useQuery,useQueryClient,useMutation}from\"@tanstack/react-query\";import{makeRequest}from\"../../axios\";import{useLocation}from\"react-router-dom\";import{useContext}from\"react\";import{AuthContext}from\"../../context/authContext\";import Update from\"../../components/update/Update\";import{useState}from\"react\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Profile=()=>{const[openUpdate,setOpenUpdate]=useState(false);const{currentUser}=useContext(AuthContext);const userId=parseInt(useLocation().pathname.split(\"/\")[2]);const{isLoading,error,data}=useQuery([\"user\"],()=>makeRequest.get(\"/users/find/\"+userId).then(res=>{return res.data;}));const{isLoading:rIsLoading,data:relationshipData}=useQuery([\"relationship\"],()=>makeRequest.get(\"/relationships?followedUserId=\"+userId).then(res=>{return res.data;}));const queryClient=useQueryClient();const mutation=useMutation(following=>{if(following)return makeRequest.delete(\"/relationships?userId=\"+userId);return makeRequest.post(\"/relationships\",{userId});},{onSuccess:()=>{queryClient.invalidateQueries([\"relationship\"]);}});const handleFollow=()=>{mutation.mutate(relationshipData.includes(currentUser.id));};return/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[isLoading?\"loading\":/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"images\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/upload/\"+data.coverPic,alt:\"\",className:\"cover\"}),/*#__PURE__*/_jsx(\"img\",{src:\"/upload/\"+data.profilePic,alt:\"\",className:\"profilePic\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profileContainer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"uInfo\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"name\",children:data.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"info\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsx(PlaceIcon,{}),/*#__PURE__*/_jsx(\"span\",{children:data.city})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"item\",children:[/*#__PURE__*/_jsx(LanguageIcon,{}),/*#__PURE__*/_jsx(\"span\",{children:data.website})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"tag\",children:data.alumniFlag?\"Alumni\":\"Student\"}),/*#__PURE__*/_jsx(\"div\",{className:\"details\",children:data.alumniFlag?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Company: \",data.company]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Position: \",data.position]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Graduation Year: \",data.gradYear]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Department: \",data.dept]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Enrollment Year: \",data.enrollmentYear]})]})}),rIsLoading?\"loading\":userId===currentUser.id?/*#__PURE__*/_jsx(\"button\",{onClick:()=>setOpenUpdate(true),children:\"Update\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleFollow,children:relationshipData.includes(currentUser.id)?\"Following\":\"Follow\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"right\"})]}),/*#__PURE__*/_jsx(Posts,{userId:userId})]})]}),openUpdate&&/*#__PURE__*/_jsx(Update,{setOpenUpdate:setOpenUpdate,user:data})]});};export default Profile;","map":{"version":3,"names":["PlaceIcon","LanguageIcon","Posts","useQuery","useQueryClient","useMutation","makeRequest","useLocation","useContext","AuthContext","Update","useState","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Profile","openUpdate","setOpenUpdate","currentUser","userId","parseInt","pathname","split","isLoading","error","data","get","then","res","rIsLoading","relationshipData","queryClient","mutation","following","delete","post","onSuccess","invalidateQueries","handleFollow","mutate","includes","id","className","children","src","coverPic","alt","profilePic","name","city","website","alumniFlag","company","position","gradYear","dept","enrollmentYear","onClick","user"],"sources":["D:/AlumniNetwork/client/src/pages/profile/Profile.jsx"],"sourcesContent":["import \"./profile.scss\";\r\nimport PlaceIcon from \"@mui/icons-material/Place\";\r\nimport LanguageIcon from \"@mui/icons-material/Language\";\r\nimport Posts from \"../../components/posts/Posts\";\r\nimport { useQuery, useQueryClient, useMutation } from \"@tanstack/react-query\";\r\nimport { makeRequest } from \"../../axios\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { useContext } from \"react\";\r\nimport { AuthContext } from \"../../context/authContext\";\r\nimport Update from \"../../components/update/Update\";\r\nimport { useState } from \"react\";\r\nconst Profile = () => {\r\n  const [openUpdate, setOpenUpdate] = useState(false);\r\n  const { currentUser } = useContext(AuthContext);\r\n\r\n  const userId = parseInt(useLocation().pathname.split(\"/\")[2]);\r\n\r\n  const { isLoading, error, data } = useQuery([\"user\"], () =>\r\n    makeRequest.get(\"/users/find/\" + userId).then((res) => {\r\n      return res.data;\r\n    })\r\n  );\r\n\r\n  const { isLoading: rIsLoading, data: relationshipData } = useQuery(\r\n    [\"relationship\"],\r\n    () =>\r\n      makeRequest.get(\"/relationships?followedUserId=\" + userId).then((res) => {\r\n        return res.data;\r\n      })\r\n  );\r\n\r\n  const queryClient = useQueryClient();\r\n\r\n  const mutation = useMutation(\r\n    (following) => {\r\n      if (following)\r\n        return makeRequest.delete(\"/relationships?userId=\" + userId);\r\n      return makeRequest.post(\"/relationships\", { userId });\r\n    },\r\n    {\r\n      onSuccess: () => {\r\n        queryClient.invalidateQueries([\"relationship\"]);\r\n      },\r\n    }\r\n  );\r\n\r\n  const handleFollow = () => {\r\n    mutation.mutate(relationshipData.includes(currentUser.id));\r\n  };\r\n\r\n  return (\r\n    <div className=\"profile\">\r\n      {isLoading ? (\r\n        \"loading\"\r\n      ) : (\r\n        <>\r\n          <div className=\"images\">\r\n            <img src={\"/upload/\" + data.coverPic} alt=\"\" className=\"cover\" />\r\n            <img src={\"/upload/\" + data.profilePic} alt=\"\" className=\"profilePic\" />\r\n          </div>\r\n          <div className=\"profileContainer\">\r\n            <div className=\"uInfo\">\r\n              <div className=\"center\">\r\n                <span className=\"name\">{data.name}</span>\r\n                <div className=\"info\">\r\n                  <div className=\"item\">\r\n                    <PlaceIcon />\r\n                    <span>{data.city}</span>\r\n                  </div>\r\n                  <div className=\"item\">\r\n                    <LanguageIcon />\r\n                    <span>{data.website}</span>\r\n                  </div>\r\n                </div>\r\n                <div className=\"tag\">\r\n                  {data.alumniFlag ? \"Alumni\" : \"Student\"}\r\n                </div>\r\n                <div className=\"details\">\r\n                  {data.alumniFlag ? (\r\n                    <>\r\n                      <p>Company: {data.company}</p>\r\n                      <p>Position: {data.position}</p>\r\n                      <p>Graduation Year: {data.gradYear}</p>\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <p>Department: {data.dept}</p>\r\n                      <p>Enrollment Year: {data.enrollmentYear}</p>\r\n                    </>\r\n                  )}\r\n                </div>\r\n                {rIsLoading ? (\r\n                  \"loading\"\r\n                ) : userId === currentUser.id ? (\r\n                  <button onClick={() => setOpenUpdate(true)}>Update</button>\r\n                ) : (\r\n                  <button onClick={handleFollow}>\r\n                    {relationshipData.includes(currentUser.id)\r\n                      ? \"Following\"\r\n                      : \"Follow\"}\r\n                  </button>\r\n                )}\r\n              </div>\r\n              <div className=\"right\">\r\n              </div>\r\n            </div>\r\n            <Posts userId={userId} />\r\n          </div>\r\n        </>\r\n      )}\r\n      {openUpdate && <Update setOpenUpdate={setOpenUpdate} user={data} />}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}